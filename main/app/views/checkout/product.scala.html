@(cart: Cart, products: List[Product])(implicit flash: Flash, request: RequestHeader, user: Option[String])

@main(Messages("product")) {
   
  @tags.nav(checkout = "disabled")

  <h2>Курс</h2>

  @helper.form(routes.Checkout.setproduct, ('id, "cart")) {

  <p>Курс можно выбрать для всех или некоторых триместров:</p>

  <div class="warning" @if(!flash.get("error")) {style="display: none"}>@Messages("error_product")</div>

  <div class="product-list">
  @for(product <- products) {
    <div>
      <input id="product-@product.product_id" type="checkbox" value="@product.product_id" name="products" style="display: none" @if(cart.items.contains(product.product_id.get)) {checked="true"} />
      <label for="product-@{product.product_id}" style="padding: 20px; margin-top: 30px; float: left;"></label>
        <div>
          <div class="left">
            @if(product.thumb != null) {
            <div class="image"><a href="#">
              <img src="@routes.Assets.at("images/" + product.thumb)" title="@{product.name}" alt="@{product.name}" id="image@{product.product_id}" /></a></div>
            }
            <div class="price">
            Цена:
            @if(product.price != 0) {
              @if(product.special == 0) {
              @{product.price}
              } else {
              <span class="price-old">@{product.price}</span> <span class="price-new">@{product.special}</span>
              }
            }
            <div class="quantity">
              Количество:
              <select name="qties.@{product.product_id}" class="select_qty">
                @for(i <- 1 to 12) {
                <option value="@i" @if(cart.items.contains(product.product_id.get) && cart.items(product.product_id.get).quantity == i) {selected="true"}>@i</option>
                }
              </select> шт.
            </div>
            </div>
            <div class="name"><a href="#">@{product.name}</a></div>
            <div class="description">@Html(product.description.substring(1, product.description.indexOf("</p>")) + "...</p>")</div>
          </div>
        </div>
      </label>
    </div>
  }
  </div>
  <div class="buttons">
    <a onclick="$('#cart').submit();" class="button"><span>@Messages("button_checkout")</span></a>
  </div>

  }

<script type="text/javascript">
  $('input').customInput();

  $("#cart").validate({
    rules: {
      products: "required"
    },
    errorPlacement: function(error, element) {
      $('div.warning').show().delay(3000).fadeOut();
    },
    onkeyup: false
  });
</script>

}

